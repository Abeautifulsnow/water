const users=[{n:'Logic',s:10},{n:'~科24~',s:0.01},{n:['libs/imgs/users/niu.png'],s:1},{n:'moleQ',s:1},{n:['西瓜丸子','libs/imgs/users/xigua.png'],s:1},{n:'呐-是小中',s:0.01}];let loadingCount=3;let loadingPercent=0;let showType=0;let animeObj={shipSpeed:100,star_speed:-0.15,star_speed2:10,};const speedDom=document.getElementById('speed');let musicPlaying=false;let musicNum=0;let scene;let camera;let renderer;let cameraControls;let cubeCamera1;let cubeCamera2;let cubeMeterial;let water_mesh;let cone_texture;let cone_group;let cone_group1;let cone_group2;let cloud;let cloud2;let lineMesh;let lineMesh2;let tunnel;let tunnel_texture;let skybox;let skybox_texture;let ship_line;let ship_red_line;let line1_mesh;let line2_mesh;let line3_mesh;let q4_mesh;let q5_mesh;let dash1_mesh;let line_group;let composer;let effectFXAA;let raycaster;let mouse;let labelRenderer;let title2d;let label2d;let outlinePass;function init3boss(){scene=new THREE.Scene();camera=new THREE.PerspectiveCamera(75,window.innerWidth/window.innerHeight,0.1,1500);renderer=new THREE.WebGLRenderer();camera.position.set(-10,0,-50);camera.lookAt(new THREE.Vector3(0,0,0));renderer.setSize(window.innerWidth,window.innerHeight,true);renderer.setClearColor(0x000000);document.getElementById("canvas-box").appendChild(renderer.domElement)}function initCameraControl(){cameraControls=new THREE.OrbitControls(camera,document.getElementById('canvas-box'));cameraControls.target.set(0,0,0);cameraControls.maxDistance=100;cameraControls.minDistance=40;cameraControls.enabled=false;cameraControls.update()}function initCubeCameras(){cubeCamera1=new THREE.CubeCamera(1,2000,256);cubeCamera1.renderTarget.texture.minFilter=THREE.LinearMipMapLinearFilter;cubeCamera1.position.x=4;scene.add(cubeCamera1);cubeCamera2=new THREE.CubeCamera(1,2000,256);cubeCamera2.renderTarget.texture.minFilter=THREE.LinearMipMapLinearFilter;cubeCamera2.position.x=4;scene.add(cubeCamera2);cubeMeterial=new THREE.MeshBasicMaterial({envMap:cubeCamera2.renderTarget.texture,})}function initWaterShip(){const points=[];const lang=42;for(let i=0;i<lang;i+=0.2){const y=Deri.start(i);points.push(new THREE.Vector2(y,i))}const water_m=new THREE.LatheBufferGeometry(points,20);water_mesh=new THREE.Mesh(water_m,cubeMeterial);water_mesh.rotation.set(0,0,Math.PI/2);water_mesh.position.x=15;cone_group=new THREE.Group();for(let i=25;i<points.length-10;i+=25){const p=createCone(points[i]);p.plane1.scale.set(0.01,0.01,0.01);p.plane2.scale.set(0.01,0.01,0.01);cone_group.add(p.plane1);cone_group.add(p.plane2)}cone_group1=cone_group.clone();cone_group2=cone_group.clone();cone_group1.rotation.y=Math.PI/180*120;cone_group2.rotation.y=Math.PI/180*-120;water_mesh.add(cone_group);water_mesh.add(cone_group1);water_mesh.add(cone_group2);scene.add(water_mesh)}function createCone(position){const material=new THREE.MeshBasicMaterial({map:cone_texture,transparent:true,depthTest:true,side:THREE.DoubleSide,blending:THREE.AdditiveBlending});const height=1.5;const width=0.5;const geometry=new THREE.PlaneGeometry(width,height);const plane1=new THREE.Mesh(geometry,material);plane1.rotation.z=Math.PI/180*90;plane1.position.y=height*100;const plane2=plane1.clone();plane2.rotation.x=Math.PI/180*90;plane1.position.copy(new THREE.Vector3(position.x+height/2,position.y,0));plane2.position.copy(new THREE.Vector3(position.x+height/2,position.y,0));return{plane1:plane1,plane2:plane2}}function makeStarTexture(){const canvas=document.createElement('canvas');canvas.width=16;canvas.height=16;const pen=canvas.getContext('2d');const gradient=pen.createRadialGradient(canvas.width/2,canvas.height/2,0,canvas.width/2,canvas.height/2,canvas.width/2);gradient.addColorStop(0,'rgba(255,255,255,1)');gradient.addColorStop(0.2,'rgba(0,255,255,1)');gradient.addColorStop(0.4,'rgba(0,0,164,1)');gradient.addColorStop(1,'rgba(0,0,0,1)');pen.fillStyle=gradient;pen.fillRect(0,0,canvas.width,canvas.height);const texture=new THREE.Texture(canvas);texture.needsUpdate=true;return texture}function initStarSky(){const material1=new THREE.PointsMaterial({color:0xffffff,size:3,transparent:true,blending:THREE.AdditiveBlending,map:makeStarTexture()});const geom=new THREE.Geometry();const range=600;const rangex=2000;for(let i=0;i<10000;i++){const particle=new THREE.Vector3(Math.random()*rangex-rangex/2,Math.random()*range-range/2,Math.random()*range-range/2);geom.vertices.push(particle);const color=new THREE.Color(0x00ffcc);geom.colors.push(color)}cloud=new THREE.Points(geom,material1);cloud2=new THREE.Points(geom,material1);cloud.sortParticles=true;cloud2.sortParticles=true;cloud2.position.x=2000;scene.add(cloud);scene.add(cloud2);const geometry=new THREE.BufferGeometry();const points=[];for(let i=0;i<1000;i++){const x=Math.random()*3000-1500;const y=Math.random()*500-250;const z=Math.random()*500-250;const lang=Math.random()*100+200;points.push(x,y,z,x+lang,y,z)}geometry.addAttribute('position',new THREE.Float32BufferAttribute(points,3));const material2=new THREE.LineBasicMaterial({color:0x638DAF,linewidth:1,linecap:'square',linejoin:'bevel',});lineMesh=new THREE.LineSegments(geometry,material2);lineMesh2=lineMesh.clone();lineMesh2.position.x=3000;lineMesh.visible=false;lineMesh2.visible=false;scene.add(lineMesh);scene.add(lineMesh2)}function initTunne(){const tunnel_points=[];for(let i=0;i<=4;i+=1){if(i===0||i===4){tunnel_points.push(new THREE.Vector3(1,600*i))}tunnel_points.push(new THREE.Vector3(100,600*i))}const tunnel_geometry=new THREE.LatheBufferGeometry(tunnel_points,20);tunnel_texture.wrapT=tunnel_texture.wrapS=THREE.RepeatWrapping;tunnel_texture.repeat.set(6,6);const tunnel_material=new THREE.MeshBasicMaterial({side:THREE.BackSide,transparent:true,alphaMap:tunnel_texture,color:0x3333aa,opacity:0.1,});tunnel=new THREE.Mesh(tunnel_geometry,tunnel_material);tunnel.rotation.z=Math.PI/180*90;tunnel.position.x=1200;tunnel.visible=false;scene.add(tunnel)}function initSkyBox(){const shader=THREE.ShaderLib["cube"];shader.uniforms["tCube"].value=skybox_texture;shader.uniforms["opacity"]={value:1};const material=new THREE.ShaderMaterial({fragmentShader:shader.fragmentShader,vertexShader:shader.vertexShader,uniforms:shader.uniforms,transparent:false,depthWrite:false,side:THREE.BackSide,});skybox=new THREE.Mesh(new THREE.BoxGeometry(2000,2000,2000),material);scene.add(skybox)}function initAppendage(){const ship_g=new THREE.Geometry();for(let j=0;j<Math.PI*2.01;j+=2*Math.PI/180){let v=new THREE.Vector3(Math.cos(j),Math.sin(j),0);ship_g.vertices.push(v)}const line=new MeshLine();line.setGeometry(ship_g);ship_line=new MeshLineMaterial({color:new THREE.Color(0x70c1b3),lineWidth:.05,transparent:true,opacity:0,side:THREE.DoubleSide});ship_red_line=new MeshLineMaterial({color:new THREE.Color(0xFF4308),transparent:true,opacity:0,lineWidth:.1,});const ship_dash=new MeshLineMaterial({color:new THREE.Color(0x70c1b3),lineWidth:.05,dashArray:0.333,dashRatio:0.666,opacity:0,transparent:true,side:THREE.DoubleSide,});const ship_red_dash=new MeshLineMaterial({color:new THREE.Color(0xFF4308),dashArray:0.5,dashRatio:0.5,transparent:true,lineWidth:.05,});line1_mesh=new THREE.Mesh(line.geometry,ship_line);line1_mesh.scale.set(0.01,0.01,0.01);line1_mesh.rotation.y=Math.PI/180*90;line1_mesh.position.x=10;scene.add(line1_mesh);line2_mesh=line1_mesh.clone();line2_mesh.scale.set(0.01,0.01,0.01);line2_mesh.position.x=10;scene.add(line2_mesh);line3_mesh=line1_mesh.clone();line3_mesh.scale.set(0.01,0.01,0.01);line3_mesh.position.x=-13;scene.add(line3_mesh);q4_mesh=new THREE.Mesh(line.geometry,ship_red_dash);q4_mesh.scale.set(0.01,0.01,0.01);q4_mesh.rotation.y=Math.PI/180*90;q4_mesh.position.x=6;scene.add(q4_mesh);q5_mesh=q4_mesh.clone();q5_mesh.scale.set(0.01,0.01,0.01);q5_mesh.position.x=-13.5;scene.add(q5_mesh);dash1_mesh=new THREE.Mesh(line.geometry,ship_dash);dash1_mesh.scale.set(4,4,4);dash1_mesh.rotation.y=Math.PI/180*90;dash1_mesh.position.x=20;scene.add(dash1_mesh);const ship_line4_g=new THREE.Geometry();ship_line4_g.vertices.push(new THREE.Vector3(0,7,0));ship_line4_g.vertices.push(new THREE.Vector3(0,5,0));const line4=new MeshLine();line4.setGeometry(ship_line4_g,function(p){return 1-p});const line4_mesh=new THREE.Mesh(line4.geometry,ship_red_line);line4_mesh.position.set(17,0,0);const line5_mesh=line4_mesh.clone();const line6_mesh=line4_mesh.clone();line5_mesh.rotation.x=Math.PI/180*120;line6_mesh.rotation.x=Math.PI/180*240;line_group=new THREE.Group();line_group.add(line4_mesh);line_group.add(line5_mesh);line_group.add(line6_mesh);scene.add(line_group)}function init2dLabel(){const label1Div=document.createElement('div');label1Div.className='title2d';label1Div.id='title2d';label1Div.innerHTML='<div class="t">Waterdrop</div><div class="l1"></div><div class="l2"></div>';const label1=new THREE.CSS2DObject(label1Div);label1.position.set(15,15,0);water_mesh.add(label1);const label2Div=document.createElement('div');label2Div.className="label2";label2Div.id="label2";label2Div.innerHTML='<p>这是2.0版本的"水滴"</p><p>配置了<i>曲率驱动引擎</i>及强互作用力外壳</p><p>由半人马星座α星系朝着太阳系行进</p><p>约<i>4个地球年</i>后抵达</p><p>哈勃望远镜已能捕获其图像</p>';const label2=new THREE.CSS2DObject(label2Div);label2.position.set(10,50,0);water_mesh.add(label2)}function initComposer(){labelRenderer=new THREE.CSS2DRenderer();labelRenderer.setSize(window.innerWidth,window.innerHeight);labelRenderer.domElement.style.position='absolute';labelRenderer.domElement.style.top=0;document.getElementById("canvas-box").appendChild(labelRenderer.domElement);composer=new THREE.EffectComposer(renderer);var renderPass=new THREE.RenderPass(scene,camera);composer.addPass(renderPass);outlinePass=new THREE.OutlinePass(new THREE.Vector2(window.innerWidth,window.innerHeight),scene,camera);outlinePass.edgeStrength=0.1;outlinePass.edgeGlow=1;outlinePass.edgeThickness=3;outlinePass.selectedObjects=[water_mesh];composer.addPass(outlinePass);effectFXAA=new THREE.ShaderPass(THREE.FXAAShader);effectFXAA.uniforms['resolution'].value.set(1/window.innerWidth,1/window.innerHeight);effectFXAA.renderToScreen=true;composer.addPass(effectFXAA);glitchPass=new THREE.GlitchPass(1);glitchPass.renderToScreen=true;glitchPass.goWild=false}function initRaycaster(){raycaster=new THREE.Raycaster();mouse=new THREE.Vector2(10000,10000)}function onMouseMove(e){mouse.x=(e.clientX/window.innerWidth)*2-1;mouse.y=-(e.clientY/window.innerHeight)*2+1}function checkLoading(){loadingPercent+=1;speedDom.innerText=((loadingPercent/loadingCount)*100).toFixed(2);if(loadingPercent>=loadingCount){init()}}function initAllTexturesAndImgs(){const loader=new THREE.TextureLoader();const cubeLoader=new THREE.CubeTextureLoader();loader.load("./libs/imgs/lightray_red.jpg",function(texture){cone_texture=texture;checkLoading()},null,function(err){console.log('光锥纹理加载失败',err)});loader.load("./libs/imgs/001_electric.jpg",function(texture){tunnel_texture=texture;checkLoading()},null,function(err){console.log('时空隧道纹理加载失败',err)});cubeLoader.load(["libs/imgs/skybox/posx.jpg","libs/imgs/skybox/negx.jpg","libs/imgs/skybox/posy.jpg","libs/imgs/skybox/negy.jpg","libs/imgs/skybox/posz.jpg","libs/imgs/skybox/negz.jpg"],function(texture){skybox_texture=texture;checkLoading()},null,function(err){console.log('天空盒纹理加载失败',err)})}function onResize(){camera.aspect=window.innerWidth/window.innerHeight;camera.updateProjectionMatrix();renderer.setSize(window.innerWidth,window.innerHeight);composer.setSize(window.innerWidth,window.innerHeight);labelRenderer.setSize(window.innerWidth,window.innerHeight);effectFXAA.uniforms['resolution'].value.set(1/window.innerWidth,1/window.innerHeight)}let count=0;let hoverToDo=false;let noHoverToDo=false;let nowNum=0;function animate(){requestAnimationFrame(animate);animate_basic();if(showType>2){animate_rayhover()}if(showType===2){TWEEN.update();if(animeObj.star_speed>-3){animeObj.star_speed-=0.02}}else if(showType===3){if(animeObj.star_speed>-40){animeObj.star_speed-=0.1;tunnel.material.opacity+=0.001;outlinePass.edgeStrength+=0.005}else{showType=4;composer.addPass(glitchPass);skybox.visible=false;cloud.visible=false;cloud2.visible=false;lineMesh.visible=true;lineMesh2.visible=true;tunnel.material.opacity=1;setTimeout(function(){showType=5;glitchPass.renderToScreen=false;$("#ship-type-ul").css("transform","translateY(-100px)");speedRipple()},400)}skybox.position.x-=2;skybox.scale.x+=2}else if(showType===5){if(outlinePass.edgeStrength>0.05){outlinePass.edgeStrength-=0.01}else{showType=6}}if(count%2===0){cubeMeterial.envMap=cubeCamera1.renderTarget.texture;cubeCamera2.update(renderer,scene)}else{cubeMeterial.envMap=cubeCamera2.renderTarget.texture;cubeCamera1.update(renderer,scene)}count++;count=count>1000000?1:count;labelRenderer.render(scene,camera);if(showType===6){renderer.render(scene,camera)}else{composer.render()}}function speedRipple(){animeObj.shipSpeed=animeObj.shipSpeed>1079252848.7?1079252848.7:1079252848.8;speedDom.innerText=animeObj.shipSpeed.toFixed(2);setTimeout(speedRipple,Math.random()*400+100)}function animate_basic(){line_group.rotation.x+=0.01;dash1_mesh.rotation.x-=0.01;cloud.position.x+=animeObj.star_speed;cloud2.position.x+=animeObj.star_speed;lineMesh.position.x-=40;lineMesh2.position.x-=40;q4_mesh.rotation.x-=0.04;q5_mesh.rotation.x-=0.04;tunnel_texture.offset.x+=0.01;tunnel_texture.offset.y-=0.06;if(cloud.position.x<=-1500){cloud.position.x=2500}if(cloud2.position.x<=-1500){cloud2.position.x=2500}if(lineMesh.position.x<=-3000){lineMesh.position.x=3000}if(lineMesh2.position.x<=-3000){lineMesh2.position.x=3000}}function animate_rayhover(){raycaster.setFromCamera(mouse,camera);if(raycaster.intersectObjects([water_mesh]).length){title2d&&!title2d.hasClass('show')&&title2d.addClass('show');label2d&&!label2d.hasClass('show')&&label2d.addClass('show');if(line1_mesh.position.x<20){line1_mesh.position.x+=1}if(line1_mesh.scale.x<3){const scale=line1_mesh.scale.x+0.1;line1_mesh.scale.set(scale,scale,scale)}if(line2_mesh.position.x<17){line2_mesh.position.x+=1}if(line2_mesh.scale.x<8){const scale=line2_mesh.scale.x+0.4;line2_mesh.scale.set(scale,scale,scale)}if(line3_mesh.position.x>-23){line3_mesh.position.x-=1}if(line3_mesh.scale.x<1.5){const scale=line3_mesh.scale.x+=0.1;line3_mesh.scale.set(scale,scale,scale)}if(q4_mesh.position.x<16){q4_mesh.position.x+=1}if(q4_mesh.scale.x<1.5){const scale=q4_mesh.scale.x+=0.1;q4_mesh.scale.set(scale,scale,scale)}if(q5_mesh.position.x>-23.5){q5_mesh.position.x-=1}if(q5_mesh.scale.x<1.5){const scale=q5_mesh.scale.x+=0.1;q5_mesh.scale.set(scale,scale,scale)}if(dash1_mesh.material.uniforms.opacity.value<1){dash1_mesh.material.uniforms.opacity.value+=0.02}if(dash1_mesh.scale.x>3.3){const scale=dash1_mesh.scale.x-=0.1;dash1_mesh.scale.set(scale,scale,scale)}if(ship_red_line.uniforms.opacity.value<1){ship_red_line.uniforms.opacity.value+=0.01}if(ship_line.uniforms.opacity.value<1){ship_line.uniforms.opacity.value=1}if(count%200===0&&!hoverToDo){hoverToDo=true;noHoverToDo=true;nowNum=0}if(hoverToDo){nowNum+=0.15;const now=Math.floor(nowNum)*2;if(now>cone_group.children.length+2){hoverToDo=false}for(let i=0;i<cone_group.children.length;i+=2){if(i===now&&cone_group.children[now].scale.x<1){const scale=cone_group.children[now].scale.x+0.1;cone_group.children[now].scale.set(scale,1,scale);cone_group.children[now+1].scale.set(scale,1,scale);cone_group1.children[now].scale.set(scale,1,scale);cone_group1.children[now+1].scale.set(scale,1,scale);cone_group2.children[now].scale.set(scale,1,scale);cone_group2.children[now+1].scale.set(scale,1,scale)}else if(i!==now&&cone_group.children[i].scale.x>0){const scale=cone_group.children[i].scale.x-0.05;cone_group.children[i].scale.set(scale,1,scale);cone_group.children[i+1].scale.set(scale,1,scale);cone_group1.children[i].scale.set(scale,1,scale);cone_group1.children[i+1].scale.set(scale,1,scale);cone_group2.children[i].scale.set(scale,1,scale);cone_group2.children[i+1].scale.set(scale,1,scale)}}}}else{title2d&&title2d.hasClass('show')&&title2d.removeClass('show');label2d&&label2d.hasClass('show')&&label2d.removeClass("show");if(line1_mesh.position.x>10){line1_mesh.position.x-=1}if(line1_mesh.scale.x>0){const scale=line1_mesh.scale.x-0.1;line1_mesh.scale.set(scale,scale,scale)}if(line2_mesh.position.x>10){line2_mesh.position.x-=1}if(line2_mesh.scale.x>0){const scale=line2_mesh.scale.x-0.4;line2_mesh.scale.set(scale,scale,scale)}if(line3_mesh.position.x<-13){line3_mesh.position.x+=1}if(line3_mesh.scale.x>0){const scale=line3_mesh.scale.x-=0.1;line3_mesh.scale.set(scale,scale,scale)}if(q4_mesh.position.x>6){q4_mesh.position.x-=1}if(q4_mesh.scale.x>0){const scale=q4_mesh.scale.x-=0.1;q4_mesh.scale.set(scale,scale,scale)}if(q5_mesh.position.x<-13.5){q5_mesh.position.x+=1}if(q5_mesh.scale.x>0){const scale=q5_mesh.scale.x-=0.1;q5_mesh.scale.set(scale,scale,scale)}if(dash1_mesh.material.uniforms.opacity.value>0){dash1_mesh.material.uniforms.opacity.value=0}if(dash1_mesh.scale.x<7){dash1_mesh.scale.set(7,7,7)}if(ship_red_line.uniforms.opacity.value>0){ship_red_line.uniforms.opacity.value=0}if(ship_line.uniforms.opacity.value>0){ship_line.uniforms.opacity.value-=0.05}if(noHoverToDo){noHoverToDo=false;hoverToDo=false;nowNum=0;for(let i=0;i<cone_group.children.length;i++){cone_group.children[i].scale.set(0.01,0.01,0.01);cone_group1.children[i].scale.set(0.01,0.01,0.01);cone_group2.children[i].scale.set(0.01,0.01,0.01)}}}}function initNames(){users.sort(function(a,b){return b.s-a.s});let str="";let num=0;for(let i=0;i<users.length;i++){let n='';if(users[i].n instanceof Array){n=users[i].n.map(function(item,index){return item.indexOf('libs/')>-1?'<img src="'+item+'">':item}).join("")}else{n=users[i].n}str+="<li><div>"+n+"</div><div>￥"+users[i].s+"</div></li>";num+=users[i].s}const fixed=2;let pos=num.toString().indexOf('.'),decimal_places=num.toString().length-pos-1,_int=num*Math.pow(10,decimal_places),divisor_1=Math.pow(10,decimal_places-fixed),divisor_2=Math.pow(10,fixed);num=Math.round(_int/divisor_1)/divisor_2;$(str).appendTo($("#names"));$("#sum").text(num)}function init(){init3boss();initCameraControl();initCubeCameras();initWaterShip();init2dLabel();initStarSky();initTunne();initSkyBox();initAppendage();initComposer();initRaycaster();initWords();initNames();window.addEventListener('resize',onResize,false);window.addEventListener('mousemove',onMouseMove,false);FastClick.attach(document.body);labelRenderer.render(scene,camera);$("#play-btn").on("click",function(){if(musicPlaying){musicPlaying=false;pause()}else{musicPlaying=true;play()}});$("#next-btn").on("click",next);$("#audio").on("ended",next);$("#menu-w").on("click",function(e){const $p=$("#page-w");if($p.hasClass("show")){$("#pages-box, #pages-box>div, #close").removeClass("show")}else{$("#pages-box, #close").addClass("show");$("#pages-box>div").removeClass("show");$p.scrollTop(0).addClass("show")}});$("#menu-m").on("click",function(e){const $p=$("#page-m");if($p.hasClass("show")){$("#pages-box, #pages-box>div, #close").removeClass("show")}else{$("#pages-box, #close").addClass("show");$("#pages-box>div").removeClass("show");$p.scrollTop(0).addClass("show")}});$("#menu-t").on("click",function(e){const $p=$("#page-t");if($p.hasClass("show")){$("#pages-box, #pages-box>div, #close").removeClass("show")}else{$("#pages-box, #close").addClass("show");$("#pages-box>div").removeClass("show");$p.scrollTop(0).addClass("show")}});$("#close").on("click",function(){$("#pages-box, #pages-box>div, #close").removeClass("show")});$("#pages-box").on("touchmove mousewheel DOMMouseScroll",function(e){e.stopPropagation()});setTimeout(function(){title2d=$("#title2d");label2d=$("#label2")});initShow();$("#ship-info-btn").addClass("show")}initAllTexturesAndImgs();function initWords(){const $i=$("#title>i");$i.each(function(index,dom){dom.style.transitionDelay=Math.floor(Math.random()*2500+500)+"ms"})}function initShow(){$("#ship-info-btn").on('click',function(){var shipInfoBtn=$(this);if(!shipInfoBtn.hasClass('show')){return}shipInfoBtn.removeClass('show');const type=Number(shipInfoBtn.data('type'));switch(type){case 1:show1();return;case 2:show2();return;case 3:show3();return}})};function show1(){animate();showType=1;$("#mask").fadeOut(5000,function(){$("#menu").addClass("show");setTimeout(function(){$("#ship-type-ul").css("transform","translateY(-40px)");$("#ship-info-btn .btn-word").text("起航");$("#ship-info-btn").data("type",2).addClass("show");$("#ship-info-box,#logo").css("z-index","10");$("#menu li").css("transition","all 200ms !important")},2000)});$("#title-box, #logo").addClass("show");$("#ship-type-ul").css("transform","translateY(-20px)");$("#speed-unit").text("km/h");play()}function show2(){$("#title-box").removeClass("show");showType=2;const tween=new TWEEN.Tween({x:camera.position.x,z:camera.position.z,}).to({x:-50,z:-18},4000).easing(TWEEN.Easing.Quadratic.InOut).onUpdate(function(){camera.position.x=this.x;camera.position.z=this.z;camera.lookAt(new THREE.Vector3(0,0,0))}).onComplete(function(){$("#control-remind").addClass("show");cameraControls.enabled=true;showType=2.5;setTimeout(function(){$("#control-remind").removeClass("show")},5000);setTimeout(function(){$("#ship-type-ul").css("transform","translateY(-80px)");$("#ship-info-btn .btn-word").text("开始星际穿梭");$("#ship-info-btn").data("type",3).addClass("show")},10000)});tween.start();anime({targets:animeObj,shipSpeed:10000,round:1,easing:'linear',duration:4000,update:function(){speedDom.innerText=animeObj.shipSpeed.toFixed(2)}});setTimeout(function(){$("#ship-type-ul").css("transform","translateY(-60px)")},4000)}function show3(){showType=3;tunnel.visible=true;anime({targets:animeObj,shipSpeed:[{value:9000000,duration:12200},{value:1079252848,duration:1000}],round:1,easing:'linear',update:function(){speedDom.innerText=animeObj.shipSpeed.toFixed(2)}})}const musics=[{url:"libs/music/0.mp3",title:'Fearless'},{url:"libs/music/1.mp3",title:'Qiu Mansion'},];function play(){const audio=document.getElementById("audio");musicPlaying=true;$("#play-btn i").addClass("animePlay");audio.play()}function pause(){const audio=document.getElementById("audio");musicPlaying=false;$("#play-btn i").removeClass("animePlay");audio.pause()}function next(){const audio=document.getElementById("audio");let musicNow=musicNum+1>musics.length-1?0:musicNum+1;musicNum=musicNow;audio.pause();audio.src=musics[musicNow].url;musicPlaying=true;$("#play-btn i").addClass("animePlay");$("#music-name").text(musics[musicNow].title);audio.play()}
